"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/leaderboard";
exports.ids = ["pages/api/leaderboard"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fleaderboard&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fleaderboard.ts&middlewareConfigBase64=e30%3D!":
/*!****************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fleaderboard&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fleaderboard.ts&middlewareConfigBase64=e30%3D! ***!
  \****************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_leaderboard_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/leaderboard.ts */ \"(api)/./pages/api/leaderboard.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_leaderboard_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_leaderboard_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/leaderboard\",\n        pathname: \"/api/leaderboard\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_leaderboard_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmxlYWRlcmJvYXJkJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGcGFnZXMlMkZhcGklMkZsZWFkZXJib2FyZC50cyZtaWRkbGV3YXJlQ29uZmlnQmFzZTY0PWUzMCUzRCEiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDTDtBQUMxRDtBQUN1RDtBQUN2RDtBQUNBLGlFQUFlLHdFQUFLLENBQUMsc0RBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sZUFBZSx3RUFBSyxDQUFDLHNEQUFRO0FBQ3BDO0FBQ08sd0JBQXdCLGdIQUFtQjtBQUNsRDtBQUNBLGNBQWMseUVBQVM7QUFDdkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxZQUFZO0FBQ1osQ0FBQzs7QUFFRCIsInNvdXJjZXMiOlsid2VicGFjazovL2Jvbmstc3BpbnMvP2YzMjAiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9sZWFkZXJib2FyZC50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2xlYWRlcmJvYXJkXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbGVhZGVyYm9hcmRcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fleaderboard&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fleaderboard.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/mongodb.ts":
/*!************************!*\
  !*** ./lib/mongodb.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   inMemoryDB: () => (/* binding */ inMemoryDB)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\n// Fallback in-memory storage for development when MongoDB is not available\nclass InMemoryDB {\n    async collection(name) {\n        return {\n            findOne: async (query)=>{\n                if (name === \"jackpotState\") return this.data.jackpotState;\n                if (name === \"winners\") return this.data.winners;\n                return null;\n            },\n            updateOne: async (query, update)=>{\n                if (name === \"jackpotState\") {\n                    this.data.jackpotState = {\n                        ...this.data.jackpotState,\n                        ...update.$set\n                    };\n                }\n                return {\n                    modifiedCount: 1\n                };\n            },\n            insertOne: async (doc)=>{\n                if (name === \"winners\") {\n                    if (doc.winType === \"jackpot\") {\n                        this.data.winners.jackpotWinners.unshift(doc);\n                        this.data.winners.jackpotWinners = this.data.winners.jackpotWinners.slice(0, 10);\n                    } else if (doc.winType === \"major\") {\n                        this.data.winners.majorWinners.unshift(doc);\n                        this.data.winners.majorWinners = this.data.winners.majorWinners.slice(0, 10);\n                    } else if (doc.winType === \"minor\") {\n                        this.data.winners.minorWinners.unshift(doc);\n                        this.data.winners.minorWinners = this.data.winners.minorWinners.slice(0, 10);\n                    }\n                }\n                return {\n                    insertedId: Date.now().toString()\n                };\n            }\n        };\n    }\n    constructor(){\n        this.data = {\n            jackpotState: {\n                pool: 0,\n                burned: 0,\n                spins: 0,\n                progress: {\n                    minors: 0,\n                    majors: 0\n                }\n            },\n            winners: {\n                jackpotWinners: [],\n                majorWinners: [],\n                minorWinners: []\n            }\n        };\n    }\n}\nlet client = null;\nlet clientPromise = null;\nlet inMemoryDB = null;\n// Check if MongoDB URI is available\nif (process.env.MONGODB_URI) {\n    try {\n        const uri = process.env.MONGODB_URI;\n        const options = {};\n        if (true) {\n            // In development mode, use a global variable so that the value\n            // is preserved across module reloads caused by HMR (Hot Module Replacement).\n            let globalWithMongo = global;\n            if (!globalWithMongo._mongoClientPromise) {\n                client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, options);\n                globalWithMongo._mongoClientPromise = client.connect();\n            }\n            clientPromise = globalWithMongo._mongoClientPromise;\n        } else {}\n    } catch (error) {\n        console.log(\"MongoDB connection failed, using in-memory storage:\", error);\n        inMemoryDB = new InMemoryDB();\n    }\n} else {\n    // Fallback to in-memory storage\n    console.log(\"MongoDB URI not found, using in-memory storage\");\n    inMemoryDB = new InMemoryDB();\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clientPromise);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0JBQWdCRSxtQkFBbUI7UUFDckQsT0FBTyxFQUlOO0lBQ0gsRUFBRSxPQUFPRSxPQUFPO1FBQ2RDLFFBQVFDLEdBQUcsQ0FBQyx1REFBdURGO1FBQ25FVixhQUFhLElBQUloQztJQUNuQjtBQUNGLE9BQU87SUFDTCxnQ0FBZ0M7SUFDaEMyQyxRQUFRQyxHQUFHLENBQUM7SUFDWlosYUFBYSxJQUFJaEM7QUFDbkI7QUFFQSxpRUFBZStCLGFBQWFBLEVBQUM7QUFDUCIsInNvdXJjZXMiOlsid2VicGFjazovL2Jvbmstc3BpbnMvLi9saWIvbW9uZ29kYi50cz8wNWJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSAnbW9uZ29kYic7XG5cbi8vIEZhbGxiYWNrIGluLW1lbW9yeSBzdG9yYWdlIGZvciBkZXZlbG9wbWVudCB3aGVuIE1vbmdvREIgaXMgbm90IGF2YWlsYWJsZVxuY2xhc3MgSW5NZW1vcnlEQiB7XG4gIHByaXZhdGUgZGF0YTogYW55ID0ge1xuICAgIGphY2twb3RTdGF0ZToge1xuICAgICAgcG9vbDogMCxcbiAgICAgIGJ1cm5lZDogMCxcbiAgICAgIHNwaW5zOiAwLFxuICAgICAgcHJvZ3Jlc3M6IHsgbWlub3JzOiAwLCBtYWpvcnM6IDAgfVxuICAgIH0sXG4gICAgd2lubmVyczoge1xuICAgICAgamFja3BvdFdpbm5lcnM6IFtdLFxuICAgICAgbWFqb3JXaW5uZXJzOiBbXSxcbiAgICAgIG1pbm9yV2lubmVyczogW11cbiAgICB9XG4gIH07XG5cbiAgYXN5bmMgY29sbGVjdGlvbihuYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZmluZE9uZTogYXN5bmMgKHF1ZXJ5OiBhbnkpID0+IHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICdqYWNrcG90U3RhdGUnKSByZXR1cm4gdGhpcy5kYXRhLmphY2twb3RTdGF0ZTtcbiAgICAgICAgaWYgKG5hbWUgPT09ICd3aW5uZXJzJykgcmV0dXJuIHRoaXMuZGF0YS53aW5uZXJzO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0sXG4gICAgICB1cGRhdGVPbmU6IGFzeW5jIChxdWVyeTogYW55LCB1cGRhdGU6IGFueSkgPT4ge1xuICAgICAgICBpZiAobmFtZSA9PT0gJ2phY2twb3RTdGF0ZScpIHtcbiAgICAgICAgICB0aGlzLmRhdGEuamFja3BvdFN0YXRlID0geyAuLi50aGlzLmRhdGEuamFja3BvdFN0YXRlLCAuLi51cGRhdGUuJHNldCB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IG1vZGlmaWVkQ291bnQ6IDEgfTtcbiAgICAgIH0sXG4gICAgICBpbnNlcnRPbmU6IGFzeW5jIChkb2M6IGFueSkgPT4ge1xuICAgICAgICBpZiAobmFtZSA9PT0gJ3dpbm5lcnMnKSB7XG4gICAgICAgICAgaWYgKGRvYy53aW5UeXBlID09PSAnamFja3BvdCcpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS53aW5uZXJzLmphY2twb3RXaW5uZXJzLnVuc2hpZnQoZG9jKTtcbiAgICAgICAgICAgIHRoaXMuZGF0YS53aW5uZXJzLmphY2twb3RXaW5uZXJzID0gdGhpcy5kYXRhLndpbm5lcnMuamFja3BvdFdpbm5lcnMuc2xpY2UoMCwgMTApO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZG9jLndpblR5cGUgPT09ICdtYWpvcicpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS53aW5uZXJzLm1ham9yV2lubmVycy51bnNoaWZ0KGRvYyk7XG4gICAgICAgICAgICB0aGlzLmRhdGEud2lubmVycy5tYWpvcldpbm5lcnMgPSB0aGlzLmRhdGEud2lubmVycy5tYWpvcldpbm5lcnMuc2xpY2UoMCwgMTApO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZG9jLndpblR5cGUgPT09ICdtaW5vcicpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS53aW5uZXJzLm1pbm9yV2lubmVycy51bnNoaWZ0KGRvYyk7XG4gICAgICAgICAgICB0aGlzLmRhdGEud2lubmVycy5taW5vcldpbm5lcnMgPSB0aGlzLmRhdGEud2lubmVycy5taW5vcldpbm5lcnMuc2xpY2UoMCwgMTApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBpbnNlcnRlZElkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCkgfTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59XG5cbmxldCBjbGllbnQ6IE1vbmdvQ2xpZW50IHwgbnVsbCA9IG51bGw7XG5sZXQgY2xpZW50UHJvbWlzZTogUHJvbWlzZTxNb25nb0NsaWVudD4gfCBudWxsID0gbnVsbDtcbmxldCBpbk1lbW9yeURCOiBJbk1lbW9yeURCIHwgbnVsbCA9IG51bGw7XG5cbi8vIENoZWNrIGlmIE1vbmdvREIgVVJJIGlzIGF2YWlsYWJsZVxuaWYgKHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXJpID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHt9O1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAvLyBJbiBkZXZlbG9wbWVudCBtb2RlLCB1c2UgYSBnbG9iYWwgdmFyaWFibGUgc28gdGhhdCB0aGUgdmFsdWVcbiAgICAgIC8vIGlzIHByZXNlcnZlZCBhY3Jvc3MgbW9kdWxlIHJlbG9hZHMgY2F1c2VkIGJ5IEhNUiAoSG90IE1vZHVsZSBSZXBsYWNlbWVudCkuXG4gICAgICBsZXQgZ2xvYmFsV2l0aE1vbmdvID0gZ2xvYmFsIGFzIHR5cGVvZiBnbG9iYWxUaGlzICYge1xuICAgICAgICBfbW9uZ29DbGllbnRQcm9taXNlPzogUHJvbWlzZTxNb25nb0NsaWVudD47XG4gICAgICB9O1xuXG4gICAgICBpZiAoIWdsb2JhbFdpdGhNb25nby5fbW9uZ29DbGllbnRQcm9taXNlKSB7XG4gICAgICAgIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmksIG9wdGlvbnMpO1xuICAgICAgICBnbG9iYWxXaXRoTW9uZ28uX21vbmdvQ2xpZW50UHJvbWlzZSA9IGNsaWVudC5jb25uZWN0KCk7XG4gICAgICB9XG4gICAgICBjbGllbnRQcm9taXNlID0gZ2xvYmFsV2l0aE1vbmdvLl9tb25nb0NsaWVudFByb21pc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEluIHByb2R1Y3Rpb24gbW9kZSwgaXQncyBiZXN0IHRvIG5vdCB1c2UgYSBnbG9iYWwgdmFyaWFibGUuXG4gICAgICBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQodXJpLCBvcHRpb25zKTtcbiAgICAgIGNsaWVudFByb21pc2UgPSBjbGllbnQuY29ubmVjdCgpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZygnTW9uZ29EQiBjb25uZWN0aW9uIGZhaWxlZCwgdXNpbmcgaW4tbWVtb3J5IHN0b3JhZ2U6JywgZXJyb3IpO1xuICAgIGluTWVtb3J5REIgPSBuZXcgSW5NZW1vcnlEQigpO1xuICB9XG59IGVsc2Uge1xuICAvLyBGYWxsYmFjayB0byBpbi1tZW1vcnkgc3RvcmFnZVxuICBjb25zb2xlLmxvZygnTW9uZ29EQiBVUkkgbm90IGZvdW5kLCB1c2luZyBpbi1tZW1vcnkgc3RvcmFnZScpO1xuICBpbk1lbW9yeURCID0gbmV3IEluTWVtb3J5REIoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xpZW50UHJvbWlzZTtcbmV4cG9ydCB7IGluTWVtb3J5REIgfTsgIl0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwiSW5NZW1vcnlEQiIsImNvbGxlY3Rpb24iLCJuYW1lIiwiZmluZE9uZSIsInF1ZXJ5IiwiZGF0YSIsImphY2twb3RTdGF0ZSIsIndpbm5lcnMiLCJ1cGRhdGVPbmUiLCJ1cGRhdGUiLCIkc2V0IiwibW9kaWZpZWRDb3VudCIsImluc2VydE9uZSIsImRvYyIsIndpblR5cGUiLCJqYWNrcG90V2lubmVycyIsInVuc2hpZnQiLCJzbGljZSIsIm1ham9yV2lubmVycyIsIm1pbm9yV2lubmVycyIsImluc2VydGVkSWQiLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJwb29sIiwiYnVybmVkIiwic3BpbnMiLCJwcm9ncmVzcyIsIm1pbm9ycyIsIm1ham9ycyIsImNsaWVudCIsImNsaWVudFByb21pc2UiLCJpbk1lbW9yeURCIiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJJIiwidXJpIiwib3B0aW9ucyIsImdsb2JhbFdpdGhNb25nbyIsImdsb2JhbCIsIl9tb25nb0NsaWVudFByb21pc2UiLCJjb25uZWN0IiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/mongodb.ts\n");

/***/ }),

/***/ "(api)/./pages/api/leaderboard.ts":
/*!**********************************!*\
  !*** ./pages/api/leaderboard.ts ***!
  \**********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/mongodb */ \"(api)/./lib/mongodb.ts\");\n\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    }\n    try {\n        if (_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"] && _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__.inMemoryDB === null) {\n            // Use MongoDB if available\n            const client = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n            const db = client.db();\n            // Latest jackpot winners\n            const jackpotWinners = await db.collection(\"jackpot_winners\").find({}).sort({\n                wonAt: -1\n            }).limit(10).toArray();\n            // Latest major/minor winners from spin_logs\n            const majorWinners = await db.collection(\"spin_logs\").find({\n                result: \"major\"\n            }).sort({\n                timestamp: -1\n            }).limit(10).toArray();\n            const minorWinners = await db.collection(\"spin_logs\").find({\n                result: \"minor\"\n            }).sort({\n                timestamp: -1\n            }).limit(10).toArray();\n            res.status(200).json({\n                jackpotWinners,\n                majorWinners,\n                minorWinners\n            });\n        } else if (_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__.inMemoryDB) {\n            // Use in-memory storage as fallback\n            const collection = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__.inMemoryDB.collection(\"winners\");\n            const winners = await collection.findOne({});\n            res.status(200).json({\n                jackpotWinners: winners.jackpotWinners || [],\n                majorWinners: winners.majorWinners || [],\n                minorWinners: winners.minorWinners || []\n            });\n        } else {\n            res.status(500).json({\n                message: \"Database not available\"\n            });\n        }\n    } catch (error) {\n        console.error(\"Error fetching leaderboard:\", error);\n        // Fallback to empty data\n        res.status(200).json({\n            jackpotWinners: [],\n            majorWinners: [],\n            minorWinners: []\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvbGVhZGVyYm9hcmQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7QUFDOEQ7QUFFL0MsZUFBZUUsUUFBUUMsR0FBbUIsRUFBRUMsR0FBb0I7SUFDN0UsSUFBSUQsSUFBSUUsTUFBTSxLQUFLLE9BQU87UUFDeEIsT0FBT0QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxTQUFTO1FBQXFCO0lBQzlEO0lBRUEsSUFBSTtRQUNGLElBQUlSLG9EQUFhQSxJQUFJQyxvREFBVUEsS0FBSyxNQUFNO1lBQ3hDLDJCQUEyQjtZQUMzQixNQUFNUSxTQUFTLE1BQU1ULG9EQUFhQTtZQUNsQyxNQUFNVSxLQUFLRCxPQUFPQyxFQUFFO1lBRXBCLHlCQUF5QjtZQUN6QixNQUFNQyxpQkFBaUIsTUFBTUQsR0FBR0UsVUFBVSxDQUFDLG1CQUN4Q0MsSUFBSSxDQUFDLENBQUMsR0FDTkMsSUFBSSxDQUFDO2dCQUFFQyxPQUFPLENBQUM7WUFBRSxHQUNqQkMsS0FBSyxDQUFDLElBQ05DLE9BQU87WUFFViw0Q0FBNEM7WUFDNUMsTUFBTUMsZUFBZSxNQUFNUixHQUFHRSxVQUFVLENBQUMsYUFDdENDLElBQUksQ0FBQztnQkFBRU0sUUFBUTtZQUFRLEdBQ3ZCTCxJQUFJLENBQUM7Z0JBQUVNLFdBQVcsQ0FBQztZQUFFLEdBQ3JCSixLQUFLLENBQUMsSUFDTkMsT0FBTztZQUNWLE1BQU1JLGVBQWUsTUFBTVgsR0FBR0UsVUFBVSxDQUFDLGFBQ3RDQyxJQUFJLENBQUM7Z0JBQUVNLFFBQVE7WUFBUSxHQUN2QkwsSUFBSSxDQUFDO2dCQUFFTSxXQUFXLENBQUM7WUFBRSxHQUNyQkosS0FBSyxDQUFDLElBQ05DLE9BQU87WUFFVmIsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDbkJJO2dCQUNBTztnQkFDQUc7WUFDRjtRQUNGLE9BQU8sSUFBSXBCLG9EQUFVQSxFQUFFO1lBQ3JCLG9DQUFvQztZQUNwQyxNQUFNVyxhQUFhLE1BQU1YLG9EQUFVQSxDQUFDVyxVQUFVLENBQUM7WUFDL0MsTUFBTVUsVUFBVSxNQUFNVixXQUFXVyxPQUFPLENBQUMsQ0FBQztZQUMxQ25CLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQ25CSSxnQkFBZ0JXLFFBQVFYLGNBQWMsSUFBSSxFQUFFO2dCQUM1Q08sY0FBY0ksUUFBUUosWUFBWSxJQUFJLEVBQUU7Z0JBQ3hDRyxjQUFjQyxRQUFRRCxZQUFZLElBQUksRUFBRTtZQUMxQztRQUNGLE9BQU87WUFDTGpCLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7Z0JBQUVDLFNBQVM7WUFBeUI7UUFDM0Q7SUFDRixFQUFFLE9BQU9nQixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQywrQkFBK0JBO1FBQzdDLHlCQUF5QjtRQUN6QnBCLElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFDbkJJLGdCQUFnQixFQUFFO1lBQ2xCTyxjQUFjLEVBQUU7WUFDaEJHLGNBQWMsRUFBRTtRQUNsQjtJQUNGO0FBQ0YiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ib25rLXNwaW5zLy4vcGFnZXMvYXBpL2xlYWRlcmJvYXJkLnRzP2UzOWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHR5cGUgeyBOZXh0QXBpUmVxdWVzdCwgTmV4dEFwaVJlc3BvbnNlIH0gZnJvbSAnbmV4dCc7XG5pbXBvcnQgY2xpZW50UHJvbWlzZSwgeyBpbk1lbW9yeURCIH0gZnJvbSAnLi4vLi4vbGliL21vbmdvZGInO1xuXG5leHBvcnQgZGVmYXVsdCBhc3luYyBmdW5jdGlvbiBoYW5kbGVyKHJlcTogTmV4dEFwaVJlcXVlc3QsIHJlczogTmV4dEFwaVJlc3BvbnNlKSB7XG4gIGlmIChyZXEubWV0aG9kICE9PSAnR0VUJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IG1lc3NhZ2U6ICdNZXRob2Qgbm90IGFsbG93ZWQnIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBpZiAoY2xpZW50UHJvbWlzZSAmJiBpbk1lbW9yeURCID09PSBudWxsKSB7XG4gICAgICAvLyBVc2UgTW9uZ29EQiBpZiBhdmFpbGFibGVcbiAgICAgIGNvbnN0IGNsaWVudCA9IGF3YWl0IGNsaWVudFByb21pc2U7XG4gICAgICBjb25zdCBkYiA9IGNsaWVudC5kYigpO1xuXG4gICAgICAvLyBMYXRlc3QgamFja3BvdCB3aW5uZXJzXG4gICAgICBjb25zdCBqYWNrcG90V2lubmVycyA9IGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2phY2twb3Rfd2lubmVycycpXG4gICAgICAgIC5maW5kKHt9KVxuICAgICAgICAuc29ydCh7IHdvbkF0OiAtMSB9KVxuICAgICAgICAubGltaXQoMTApXG4gICAgICAgIC50b0FycmF5KCk7XG5cbiAgICAgIC8vIExhdGVzdCBtYWpvci9taW5vciB3aW5uZXJzIGZyb20gc3Bpbl9sb2dzXG4gICAgICBjb25zdCBtYWpvcldpbm5lcnMgPSBhd2FpdCBkYi5jb2xsZWN0aW9uKCdzcGluX2xvZ3MnKVxuICAgICAgICAuZmluZCh7IHJlc3VsdDogJ21ham9yJyB9KVxuICAgICAgICAuc29ydCh7IHRpbWVzdGFtcDogLTEgfSlcbiAgICAgICAgLmxpbWl0KDEwKVxuICAgICAgICAudG9BcnJheSgpO1xuICAgICAgY29uc3QgbWlub3JXaW5uZXJzID0gYXdhaXQgZGIuY29sbGVjdGlvbignc3Bpbl9sb2dzJylcbiAgICAgICAgLmZpbmQoeyByZXN1bHQ6ICdtaW5vcicgfSlcbiAgICAgICAgLnNvcnQoeyB0aW1lc3RhbXA6IC0xIH0pXG4gICAgICAgIC5saW1pdCgxMClcbiAgICAgICAgLnRvQXJyYXkoKTtcblxuICAgICAgcmVzLnN0YXR1cygyMDApLmpzb24oe1xuICAgICAgICBqYWNrcG90V2lubmVycyxcbiAgICAgICAgbWFqb3JXaW5uZXJzLFxuICAgICAgICBtaW5vcldpbm5lcnMsXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGluTWVtb3J5REIpIHtcbiAgICAgIC8vIFVzZSBpbi1tZW1vcnkgc3RvcmFnZSBhcyBmYWxsYmFja1xuICAgICAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGluTWVtb3J5REIuY29sbGVjdGlvbignd2lubmVycycpO1xuICAgICAgY29uc3Qgd2lubmVycyA9IGF3YWl0IGNvbGxlY3Rpb24uZmluZE9uZSh7fSk7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgIGphY2twb3RXaW5uZXJzOiB3aW5uZXJzLmphY2twb3RXaW5uZXJzIHx8IFtdLFxuICAgICAgICBtYWpvcldpbm5lcnM6IHdpbm5lcnMubWFqb3JXaW5uZXJzIHx8IFtdLFxuICAgICAgICBtaW5vcldpbm5lcnM6IHdpbm5lcnMubWlub3JXaW5uZXJzIHx8IFtdLFxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgbWVzc2FnZTogJ0RhdGFiYXNlIG5vdCBhdmFpbGFibGUnIH0pO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBsZWFkZXJib2FyZDonLCBlcnJvcik7XG4gICAgLy8gRmFsbGJhY2sgdG8gZW1wdHkgZGF0YVxuICAgIHJlcy5zdGF0dXMoMjAwKS5qc29uKHtcbiAgICAgIGphY2twb3RXaW5uZXJzOiBbXSxcbiAgICAgIG1ham9yV2lubmVyczogW10sXG4gICAgICBtaW5vcldpbm5lcnM6IFtdLFxuICAgIH0pO1xuICB9XG59ICJdLCJuYW1lcyI6WyJjbGllbnRQcm9taXNlIiwiaW5NZW1vcnlEQiIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJqc29uIiwibWVzc2FnZSIsImNsaWVudCIsImRiIiwiamFja3BvdFdpbm5lcnMiLCJjb2xsZWN0aW9uIiwiZmluZCIsInNvcnQiLCJ3b25BdCIsImxpbWl0IiwidG9BcnJheSIsIm1ham9yV2lubmVycyIsInJlc3VsdCIsInRpbWVzdGFtcCIsIm1pbm9yV2lubmVycyIsIndpbm5lcnMiLCJmaW5kT25lIiwiZXJyb3IiLCJjb25zb2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./pages/api/leaderboard.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fleaderboard&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fleaderboard.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();