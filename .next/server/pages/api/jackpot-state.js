"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/jackpot-state";
exports.ids = ["pages/api/jackpot-state"];
exports.modules = {

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fjackpot-state&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fjackpot-state.ts&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fjackpot-state&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fjackpot-state.ts&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_jackpot_state_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/jackpot-state.ts */ \"(api)/./pages/api/jackpot-state.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_jackpot_state_ts__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_jackpot_state_ts__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/jackpot-state\",\n        pathname: \"/api/jackpot-state\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_jackpot_state_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmphY2twb3Qtc3RhdGUmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmphY2twb3Qtc3RhdGUudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDeUQ7QUFDekQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLHdEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyx3REFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9ib25rLXNwaW5zLz82ODJlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvamFja3BvdC1zdGF0ZS50c1wiO1xuLy8gUmUtZXhwb3J0IHRoZSBoYW5kbGVyIChzaG91bGQgYmUgdGhlIGRlZmF1bHQgZXhwb3J0KS5cbmV4cG9ydCBkZWZhdWx0IGhvaXN0KHVzZXJsYW5kLCBcImRlZmF1bHRcIik7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCBcImNvbmZpZ1wiKTtcbi8vIENyZWF0ZSBhbmQgZXhwb3J0IHRoZSByb3V0ZSBtb2R1bGUgdGhhdCB3aWxsIGJlIGNvbnN1bWVkLlxuZXhwb3J0IGNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IFBhZ2VzQVBJUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLlBBR0VTX0FQSSxcbiAgICAgICAgcGFnZTogXCIvYXBpL2phY2twb3Qtc3RhdGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9qYWNrcG90LXN0YXRlXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fjackpot-state&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fjackpot-state.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/mongodb.ts":
/*!************************!*\
  !*** ./lib/mongodb.ts ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   inMemoryDB: () => (/* binding */ inMemoryDB)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\n// Fallback in-memory storage for development when MongoDB is not available\nclass InMemoryDB {\n    async collection(name) {\n        return {\n            findOne: async (query)=>{\n                if (name === \"jackpotState\") return this.data.jackpotState;\n                if (name === \"winners\") return this.data.winners;\n                return null;\n            },\n            updateOne: async (query, update)=>{\n                if (name === \"jackpotState\") {\n                    this.data.jackpotState = {\n                        ...this.data.jackpotState,\n                        ...update.$set\n                    };\n                }\n                return {\n                    modifiedCount: 1\n                };\n            },\n            insertOne: async (doc)=>{\n                if (name === \"winners\") {\n                    if (doc.winType === \"jackpot\") {\n                        this.data.winners.jackpotWinners.unshift(doc);\n                        this.data.winners.jackpotWinners = this.data.winners.jackpotWinners.slice(0, 10);\n                    } else if (doc.winType === \"major\") {\n                        this.data.winners.majorWinners.unshift(doc);\n                        this.data.winners.majorWinners = this.data.winners.majorWinners.slice(0, 10);\n                    } else if (doc.winType === \"minor\") {\n                        this.data.winners.minorWinners.unshift(doc);\n                        this.data.winners.minorWinners = this.data.winners.minorWinners.slice(0, 10);\n                    }\n                }\n                return {\n                    insertedId: Date.now().toString()\n                };\n            }\n        };\n    }\n    constructor(){\n        this.data = {\n            jackpotState: {\n                pool: 0,\n                burned: 0,\n                spins: 0,\n                progress: {\n                    minors: 0,\n                    majors: 0\n                }\n            },\n            winners: {\n                jackpotWinners: [],\n                majorWinners: [],\n                minorWinners: []\n            }\n        };\n    }\n}\nlet client = null;\nlet clientPromise = null;\nlet inMemoryDB = null;\n// Check if MongoDB URI is available\nif (process.env.MONGODB_URI) {\n    try {\n        const uri = process.env.MONGODB_URI;\n        const options = {};\n        if (true) {\n            // In development mode, use a global variable so that the value\n            // is preserved across module reloads caused by HMR (Hot Module Replacement).\n            let globalWithMongo = global;\n            if (!globalWithMongo._mongoClientPromise) {\n                client = new mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient(uri, options);\n                globalWithMongo._mongoClientPromise = client.connect();\n            }\n            clientPromise = globalWithMongo._mongoClientPromise;\n        } else {}\n    } catch (error) {\n        console.log(\"MongoDB connection failed, using in-memory storage:\", error);\n        inMemoryDB = new InMemoryDB();\n    }\n} else {\n    // Fallback to in-memory storage\n    console.log(\"MongoDB URI not found, using in-memory storage\");\n    inMemoryDB = new InMemoryDB();\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (clientPromise);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Z0JBQWdCRSxtQkFBbUI7UUFDckQsT0FBTyxFQUlOO0lBQ0gsRUFBRSxPQUFPRSxPQUFPO1FBQ2RDLFFBQVFDLEdBQUcsQ0FBQyx1REFBdURGO1FBQ25FVixhQUFhLElBQUloQztJQUNuQjtBQUNGLE9BQU87SUFDTCxnQ0FBZ0M7SUFDaEMyQyxRQUFRQyxHQUFHLENBQUM7SUFDWlosYUFBYSxJQUFJaEM7QUFDbkI7QUFFQSxpRUFBZStCLGFBQWFBLEVBQUM7QUFDUCIsInNvdXJjZXMiOlsid2VicGFjazovL2Jvbmstc3BpbnMvLi9saWIvbW9uZ29kYi50cz8wNWJkIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE1vbmdvQ2xpZW50IH0gZnJvbSAnbW9uZ29kYic7XG5cbi8vIEZhbGxiYWNrIGluLW1lbW9yeSBzdG9yYWdlIGZvciBkZXZlbG9wbWVudCB3aGVuIE1vbmdvREIgaXMgbm90IGF2YWlsYWJsZVxuY2xhc3MgSW5NZW1vcnlEQiB7XG4gIHByaXZhdGUgZGF0YTogYW55ID0ge1xuICAgIGphY2twb3RTdGF0ZToge1xuICAgICAgcG9vbDogMCxcbiAgICAgIGJ1cm5lZDogMCxcbiAgICAgIHNwaW5zOiAwLFxuICAgICAgcHJvZ3Jlc3M6IHsgbWlub3JzOiAwLCBtYWpvcnM6IDAgfVxuICAgIH0sXG4gICAgd2lubmVyczoge1xuICAgICAgamFja3BvdFdpbm5lcnM6IFtdLFxuICAgICAgbWFqb3JXaW5uZXJzOiBbXSxcbiAgICAgIG1pbm9yV2lubmVyczogW11cbiAgICB9XG4gIH07XG5cbiAgYXN5bmMgY29sbGVjdGlvbihuYW1lOiBzdHJpbmcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgZmluZE9uZTogYXN5bmMgKHF1ZXJ5OiBhbnkpID0+IHtcbiAgICAgICAgaWYgKG5hbWUgPT09ICdqYWNrcG90U3RhdGUnKSByZXR1cm4gdGhpcy5kYXRhLmphY2twb3RTdGF0ZTtcbiAgICAgICAgaWYgKG5hbWUgPT09ICd3aW5uZXJzJykgcmV0dXJuIHRoaXMuZGF0YS53aW5uZXJzO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgIH0sXG4gICAgICB1cGRhdGVPbmU6IGFzeW5jIChxdWVyeTogYW55LCB1cGRhdGU6IGFueSkgPT4ge1xuICAgICAgICBpZiAobmFtZSA9PT0gJ2phY2twb3RTdGF0ZScpIHtcbiAgICAgICAgICB0aGlzLmRhdGEuamFja3BvdFN0YXRlID0geyAuLi50aGlzLmRhdGEuamFja3BvdFN0YXRlLCAuLi51cGRhdGUuJHNldCB9O1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiB7IG1vZGlmaWVkQ291bnQ6IDEgfTtcbiAgICAgIH0sXG4gICAgICBpbnNlcnRPbmU6IGFzeW5jIChkb2M6IGFueSkgPT4ge1xuICAgICAgICBpZiAobmFtZSA9PT0gJ3dpbm5lcnMnKSB7XG4gICAgICAgICAgaWYgKGRvYy53aW5UeXBlID09PSAnamFja3BvdCcpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS53aW5uZXJzLmphY2twb3RXaW5uZXJzLnVuc2hpZnQoZG9jKTtcbiAgICAgICAgICAgIHRoaXMuZGF0YS53aW5uZXJzLmphY2twb3RXaW5uZXJzID0gdGhpcy5kYXRhLndpbm5lcnMuamFja3BvdFdpbm5lcnMuc2xpY2UoMCwgMTApO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZG9jLndpblR5cGUgPT09ICdtYWpvcicpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS53aW5uZXJzLm1ham9yV2lubmVycy51bnNoaWZ0KGRvYyk7XG4gICAgICAgICAgICB0aGlzLmRhdGEud2lubmVycy5tYWpvcldpbm5lcnMgPSB0aGlzLmRhdGEud2lubmVycy5tYWpvcldpbm5lcnMuc2xpY2UoMCwgMTApO1xuICAgICAgICAgIH0gZWxzZSBpZiAoZG9jLndpblR5cGUgPT09ICdtaW5vcicpIHtcbiAgICAgICAgICAgIHRoaXMuZGF0YS53aW5uZXJzLm1pbm9yV2lubmVycy51bnNoaWZ0KGRvYyk7XG4gICAgICAgICAgICB0aGlzLmRhdGEud2lubmVycy5taW5vcldpbm5lcnMgPSB0aGlzLmRhdGEud2lubmVycy5taW5vcldpbm5lcnMuc2xpY2UoMCwgMTApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4geyBpbnNlcnRlZElkOiBEYXRlLm5vdygpLnRvU3RyaW5nKCkgfTtcbiAgICAgIH1cbiAgICB9O1xuICB9XG59XG5cbmxldCBjbGllbnQ6IE1vbmdvQ2xpZW50IHwgbnVsbCA9IG51bGw7XG5sZXQgY2xpZW50UHJvbWlzZTogUHJvbWlzZTxNb25nb0NsaWVudD4gfCBudWxsID0gbnVsbDtcbmxldCBpbk1lbW9yeURCOiBJbk1lbW9yeURCIHwgbnVsbCA9IG51bGw7XG5cbi8vIENoZWNrIGlmIE1vbmdvREIgVVJJIGlzIGF2YWlsYWJsZVxuaWYgKHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgdXJpID0gcHJvY2Vzcy5lbnYuTU9OR09EQl9VUkk7XG4gICAgY29uc3Qgb3B0aW9ucyA9IHt9O1xuXG4gICAgaWYgKHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnKSB7XG4gICAgICAvLyBJbiBkZXZlbG9wbWVudCBtb2RlLCB1c2UgYSBnbG9iYWwgdmFyaWFibGUgc28gdGhhdCB0aGUgdmFsdWVcbiAgICAgIC8vIGlzIHByZXNlcnZlZCBhY3Jvc3MgbW9kdWxlIHJlbG9hZHMgY2F1c2VkIGJ5IEhNUiAoSG90IE1vZHVsZSBSZXBsYWNlbWVudCkuXG4gICAgICBsZXQgZ2xvYmFsV2l0aE1vbmdvID0gZ2xvYmFsIGFzIHR5cGVvZiBnbG9iYWxUaGlzICYge1xuICAgICAgICBfbW9uZ29DbGllbnRQcm9taXNlPzogUHJvbWlzZTxNb25nb0NsaWVudD47XG4gICAgICB9O1xuXG4gICAgICBpZiAoIWdsb2JhbFdpdGhNb25nby5fbW9uZ29DbGllbnRQcm9taXNlKSB7XG4gICAgICAgIGNsaWVudCA9IG5ldyBNb25nb0NsaWVudCh1cmksIG9wdGlvbnMpO1xuICAgICAgICBnbG9iYWxXaXRoTW9uZ28uX21vbmdvQ2xpZW50UHJvbWlzZSA9IGNsaWVudC5jb25uZWN0KCk7XG4gICAgICB9XG4gICAgICBjbGllbnRQcm9taXNlID0gZ2xvYmFsV2l0aE1vbmdvLl9tb25nb0NsaWVudFByb21pc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEluIHByb2R1Y3Rpb24gbW9kZSwgaXQncyBiZXN0IHRvIG5vdCB1c2UgYSBnbG9iYWwgdmFyaWFibGUuXG4gICAgICBjbGllbnQgPSBuZXcgTW9uZ29DbGllbnQodXJpLCBvcHRpb25zKTtcbiAgICAgIGNsaWVudFByb21pc2UgPSBjbGllbnQuY29ubmVjdCgpO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmxvZygnTW9uZ29EQiBjb25uZWN0aW9uIGZhaWxlZCwgdXNpbmcgaW4tbWVtb3J5IHN0b3JhZ2U6JywgZXJyb3IpO1xuICAgIGluTWVtb3J5REIgPSBuZXcgSW5NZW1vcnlEQigpO1xuICB9XG59IGVsc2Uge1xuICAvLyBGYWxsYmFjayB0byBpbi1tZW1vcnkgc3RvcmFnZVxuICBjb25zb2xlLmxvZygnTW9uZ29EQiBVUkkgbm90IGZvdW5kLCB1c2luZyBpbi1tZW1vcnkgc3RvcmFnZScpO1xuICBpbk1lbW9yeURCID0gbmV3IEluTWVtb3J5REIoKTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xpZW50UHJvbWlzZTtcbmV4cG9ydCB7IGluTWVtb3J5REIgfTsgIl0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwiSW5NZW1vcnlEQiIsImNvbGxlY3Rpb24iLCJuYW1lIiwiZmluZE9uZSIsInF1ZXJ5IiwiZGF0YSIsImphY2twb3RTdGF0ZSIsIndpbm5lcnMiLCJ1cGRhdGVPbmUiLCJ1cGRhdGUiLCIkc2V0IiwibW9kaWZpZWRDb3VudCIsImluc2VydE9uZSIsImRvYyIsIndpblR5cGUiLCJqYWNrcG90V2lubmVycyIsInVuc2hpZnQiLCJzbGljZSIsIm1ham9yV2lubmVycyIsIm1pbm9yV2lubmVycyIsImluc2VydGVkSWQiLCJEYXRlIiwibm93IiwidG9TdHJpbmciLCJwb29sIiwiYnVybmVkIiwic3BpbnMiLCJwcm9ncmVzcyIsIm1pbm9ycyIsIm1ham9ycyIsImNsaWVudCIsImNsaWVudFByb21pc2UiLCJpbk1lbW9yeURCIiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJJIiwidXJpIiwib3B0aW9ucyIsImdsb2JhbFdpdGhNb25nbyIsImdsb2JhbCIsIl9tb25nb0NsaWVudFByb21pc2UiLCJjb25uZWN0IiwiZXJyb3IiLCJjb25zb2xlIiwibG9nIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./lib/mongodb.ts\n");

/***/ }),

/***/ "(api)/./pages/api/jackpot-state.ts":
/*!************************************!*\
  !*** ./pages/api/jackpot-state.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../../lib/mongodb */ \"(api)/./lib/mongodb.ts\");\n\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        return res.status(405).json({\n            message: \"Method not allowed\"\n        });\n    }\n    try {\n        if (_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"] && _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__.inMemoryDB === null) {\n            // Use MongoDB if available\n            const client = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__[\"default\"];\n            const db = client.db();\n            const state = await db.collection(\"jackpot_state\").findOne({\n                status: \"open\"\n            });\n            if (!state) {\n                return res.status(404).json({\n                    message: \"No open jackpot state\"\n                });\n            }\n            res.status(200).json({\n                jackpotRoll: state.jackpotRoll,\n                majorRolls: state.majorRolls,\n                minorRolls: state.minorRolls,\n                hitMajors: state.hitMajors,\n                hitMinors: state.hitMinors,\n                status: state.status,\n                createdAt: state.createdAt,\n                lastUpdated: state.lastUpdated,\n                progress: {\n                    minors: state.hitMinors.length / 100,\n                    majors: state.hitMajors.length / 10\n                }\n            });\n        } else if (_lib_mongodb__WEBPACK_IMPORTED_MODULE_0__.inMemoryDB) {\n            // Use in-memory storage as fallback\n            const collection = await _lib_mongodb__WEBPACK_IMPORTED_MODULE_0__.inMemoryDB.collection(\"jackpotState\");\n            const state = await collection.findOne({});\n            res.status(200).json({\n                pool: state.pool,\n                burned: state.burned,\n                spins: state.spins,\n                progress: state.progress\n            });\n        } else {\n            res.status(500).json({\n                message: \"Database not available\"\n            });\n        }\n    } catch (error) {\n        console.error(\"Error fetching jackpot state:\", error);\n        // Fallback to in-memory data\n        res.status(200).json({\n            pool: 0,\n            burned: 0,\n            spins: 0,\n            progress: {\n                minors: 0,\n                majors: 0\n            }\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvamFja3BvdC1zdGF0ZS50cyIsIm1hcHBpbmdzIjoiOzs7OztBQUM4RDtBQUUvQyxlQUFlRSxRQUFRQyxHQUFtQixFQUFFQyxHQUFvQjtJQUM3RSxJQUFJRCxJQUFJRSxNQUFNLEtBQUssT0FBTztRQUN4QixPQUFPRCxJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQUVDLFNBQVM7UUFBcUI7SUFDOUQ7SUFFQSxJQUFJO1FBQ0YsSUFBSVIsb0RBQWFBLElBQUlDLG9EQUFVQSxLQUFLLE1BQU07WUFDeEMsMkJBQTJCO1lBQzNCLE1BQU1RLFNBQVMsTUFBTVQsb0RBQWFBO1lBQ2xDLE1BQU1VLEtBQUtELE9BQU9DLEVBQUU7WUFDcEIsTUFBTUMsUUFBUSxNQUFNRCxHQUFHRSxVQUFVLENBQUMsaUJBQWlCQyxPQUFPLENBQUM7Z0JBQUVQLFFBQVE7WUFBTztZQUM1RSxJQUFJLENBQUNLLE9BQU87Z0JBQ1YsT0FBT1AsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztvQkFBRUMsU0FBUztnQkFBd0I7WUFDakU7WUFDQUosSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDbkJPLGFBQWFILE1BQU1HLFdBQVc7Z0JBQzlCQyxZQUFZSixNQUFNSSxVQUFVO2dCQUM1QkMsWUFBWUwsTUFBTUssVUFBVTtnQkFDNUJDLFdBQVdOLE1BQU1NLFNBQVM7Z0JBQzFCQyxXQUFXUCxNQUFNTyxTQUFTO2dCQUMxQlosUUFBUUssTUFBTUwsTUFBTTtnQkFDcEJhLFdBQVdSLE1BQU1RLFNBQVM7Z0JBQzFCQyxhQUFhVCxNQUFNUyxXQUFXO2dCQUM5QkMsVUFBVTtvQkFDUkMsUUFBUVgsTUFBTU8sU0FBUyxDQUFDSyxNQUFNLEdBQUc7b0JBQ2pDQyxRQUFRYixNQUFNTSxTQUFTLENBQUNNLE1BQU0sR0FBRztnQkFDbkM7WUFDRjtRQUNGLE9BQU8sSUFBSXRCLG9EQUFVQSxFQUFFO1lBQ3JCLG9DQUFvQztZQUNwQyxNQUFNVyxhQUFhLE1BQU1YLG9EQUFVQSxDQUFDVyxVQUFVLENBQUM7WUFDL0MsTUFBTUQsUUFBUSxNQUFNQyxXQUFXQyxPQUFPLENBQUMsQ0FBQztZQUN4Q1QsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFDbkJrQixNQUFNZCxNQUFNYyxJQUFJO2dCQUNoQkMsUUFBUWYsTUFBTWUsTUFBTTtnQkFDcEJDLE9BQU9oQixNQUFNZ0IsS0FBSztnQkFDbEJOLFVBQVVWLE1BQU1VLFFBQVE7WUFDMUI7UUFDRixPQUFPO1lBQ0xqQixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO2dCQUFFQyxTQUFTO1lBQXlCO1FBQzNEO0lBQ0YsRUFBRSxPQUFPb0IsT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsaUNBQWlDQTtRQUMvQyw2QkFBNkI7UUFDN0J4QixJQUFJRSxNQUFNLENBQUMsS0FBS0MsSUFBSSxDQUFDO1lBQ25Ca0IsTUFBTTtZQUNOQyxRQUFRO1lBQ1JDLE9BQU87WUFDUE4sVUFBVTtnQkFBRUMsUUFBUTtnQkFBR0UsUUFBUTtZQUFFO1FBQ25DO0lBQ0Y7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2Jvbmstc3BpbnMvLi9wYWdlcy9hcGkvamFja3BvdC1zdGF0ZS50cz9kYjNmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IGNsaWVudFByb21pc2UsIHsgaW5NZW1vcnlEQiB9IGZyb20gJy4uLy4uL2xpYi9tb25nb2RiJztcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXE6IE5leHRBcGlSZXF1ZXN0LCByZXM6IE5leHRBcGlSZXNwb25zZSkge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gJ0dFVCcpIHtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg0MDUpLmpzb24oeyBtZXNzYWdlOiAnTWV0aG9kIG5vdCBhbGxvd2VkJyB9KTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgaWYgKGNsaWVudFByb21pc2UgJiYgaW5NZW1vcnlEQiA9PT0gbnVsbCkge1xuICAgICAgLy8gVXNlIE1vbmdvREIgaWYgYXZhaWxhYmxlXG4gICAgICBjb25zdCBjbGllbnQgPSBhd2FpdCBjbGllbnRQcm9taXNlO1xuICAgICAgY29uc3QgZGIgPSBjbGllbnQuZGIoKTtcbiAgICAgIGNvbnN0IHN0YXRlID0gYXdhaXQgZGIuY29sbGVjdGlvbignamFja3BvdF9zdGF0ZScpLmZpbmRPbmUoeyBzdGF0dXM6ICdvcGVuJyB9KTtcbiAgICAgIGlmICghc3RhdGUpIHtcbiAgICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA0KS5qc29uKHsgbWVzc2FnZTogJ05vIG9wZW4gamFja3BvdCBzdGF0ZScgfSk7XG4gICAgICB9XG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgIGphY2twb3RSb2xsOiBzdGF0ZS5qYWNrcG90Um9sbCxcbiAgICAgICAgbWFqb3JSb2xsczogc3RhdGUubWFqb3JSb2xscyxcbiAgICAgICAgbWlub3JSb2xsczogc3RhdGUubWlub3JSb2xscyxcbiAgICAgICAgaGl0TWFqb3JzOiBzdGF0ZS5oaXRNYWpvcnMsXG4gICAgICAgIGhpdE1pbm9yczogc3RhdGUuaGl0TWlub3JzLFxuICAgICAgICBzdGF0dXM6IHN0YXRlLnN0YXR1cyxcbiAgICAgICAgY3JlYXRlZEF0OiBzdGF0ZS5jcmVhdGVkQXQsXG4gICAgICAgIGxhc3RVcGRhdGVkOiBzdGF0ZS5sYXN0VXBkYXRlZCxcbiAgICAgICAgcHJvZ3Jlc3M6IHtcbiAgICAgICAgICBtaW5vcnM6IHN0YXRlLmhpdE1pbm9ycy5sZW5ndGggLyAxMDAsXG4gICAgICAgICAgbWFqb3JzOiBzdGF0ZS5oaXRNYWpvcnMubGVuZ3RoIC8gMTAsXG4gICAgICAgIH0sXG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKGluTWVtb3J5REIpIHtcbiAgICAgIC8vIFVzZSBpbi1tZW1vcnkgc3RvcmFnZSBhcyBmYWxsYmFja1xuICAgICAgY29uc3QgY29sbGVjdGlvbiA9IGF3YWl0IGluTWVtb3J5REIuY29sbGVjdGlvbignamFja3BvdFN0YXRlJyk7XG4gICAgICBjb25zdCBzdGF0ZSA9IGF3YWl0IGNvbGxlY3Rpb24uZmluZE9uZSh7fSk7XG4gICAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICAgIHBvb2w6IHN0YXRlLnBvb2wsXG4gICAgICAgIGJ1cm5lZDogc3RhdGUuYnVybmVkLFxuICAgICAgICBzcGluczogc3RhdGUuc3BpbnMsXG4gICAgICAgIHByb2dyZXNzOiBzdGF0ZS5wcm9ncmVzcyxcbiAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXMuc3RhdHVzKDUwMCkuanNvbih7IG1lc3NhZ2U6ICdEYXRhYmFzZSBub3QgYXZhaWxhYmxlJyB9KTtcbiAgICB9XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgamFja3BvdCBzdGF0ZTonLCBlcnJvcik7XG4gICAgLy8gRmFsbGJhY2sgdG8gaW4tbWVtb3J5IGRhdGFcbiAgICByZXMuc3RhdHVzKDIwMCkuanNvbih7XG4gICAgICBwb29sOiAwLFxuICAgICAgYnVybmVkOiAwLFxuICAgICAgc3BpbnM6IDAsXG4gICAgICBwcm9ncmVzczogeyBtaW5vcnM6IDAsIG1ham9yczogMCB9XG4gICAgfSk7XG4gIH1cbn0gIl0sIm5hbWVzIjpbImNsaWVudFByb21pc2UiLCJpbk1lbW9yeURCIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwiY2xpZW50IiwiZGIiLCJzdGF0ZSIsImNvbGxlY3Rpb24iLCJmaW5kT25lIiwiamFja3BvdFJvbGwiLCJtYWpvclJvbGxzIiwibWlub3JSb2xscyIsImhpdE1ham9ycyIsImhpdE1pbm9ycyIsImNyZWF0ZWRBdCIsImxhc3RVcGRhdGVkIiwicHJvZ3Jlc3MiLCJtaW5vcnMiLCJsZW5ndGgiLCJtYWpvcnMiLCJwb29sIiwiYnVybmVkIiwic3BpbnMiLCJlcnJvciIsImNvbnNvbGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/jackpot-state.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fjackpot-state&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fjackpot-state.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();