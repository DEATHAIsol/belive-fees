(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[915],{2416:function(e,t,n){Promise.resolve().then(n.bind(n,6508))},6508:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return SlotMachinePage}});var l=n(7437),a=n(2070),s=n(3365),r=n(2265),o=n(3446);let i=[{name:"Bonk Dog",emoji:"\uD83D\uDC36"},{name:"Banana",emoji:"\uD83C\uDF4C"},{name:"Rug",emoji:"\uD83E\uDDF6"},{name:"Fire",emoji:"\uD83D\uDD25"},{name:"Diamond",emoji:"\uD83D\uDC8E"},{name:"Rocket",emoji:"\uD83D\uDE80"},{name:"Skull",emoji:"\uD83D\uDC80"}];function SlotMachinePage(){let{connected:e,publicKey:t}=(0,o.O)(),[n,c]=(0,r.useState)([0,0,0,0,0]),[d,u]=(0,r.useState)(!1),[m,p]=(0,r.useState)([]),[x,h]=(0,r.useState)(null),[g,b]=(0,r.useState)(null);(0,r.useEffect)(()=>{let fetchJackpot=async()=>{let e=await fetch("/api/jackpot-state");e.ok&&h(await e.json())},fetchLeaderboard=async()=>{let e=await fetch("/api/leaderboard");e.ok&&b(await e.json())};fetchJackpot(),fetchLeaderboard();let e=setInterval(()=>{fetchJackpot(),fetchLeaderboard()},6e4);return()=>clearInterval(e)},[]);let spin=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(!d&&t){u(!0);for(let n=0;n<e;n++){let l=await fetch("/api/spin",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({wallet:t.toString(),spinType:1===e?"single":10===e?"ten":"hundred"})}),a=await l.json();c(a.reels||[0,0,0,0,0]),p(e=>["Spin ".concat(n+1,": ").concat(a.symbols?a.symbols.map(e=>{let t=i.find(t=>t.name.toLowerCase().includes(e));return t?t.emoji:e}).join(" "):"").concat(a.winType?"none"!==a.winType?" ("+a.winType.toUpperCase()+")":"":a.result&&"none"!==a.result?" ("+a.result.toUpperCase()+")":""),...e.slice(0,9)]),await new Promise(e=>setTimeout(e,800))}u(!1)}};return(0,l.jsxs)("div",{className:"flex min-h-screen bg-background",children:[(0,l.jsx)(a.default,{}),(0,l.jsxs)("div",{className:"flex-1 p-8 flex flex-col items-center",children:[(0,l.jsx)("h1",{className:"text-4xl font-bold mb-2 text-primary",children:"Bonk Slots"}),(0,l.jsx)("p",{className:"mb-2 text-lg text-gray-400",children:"Spin your way to the next degen jackpot."}),(0,l.jsx)("p",{className:"mb-6 text-accent font-semibold",children:"1 free spin for every 10,000 tokens owned"}),(0,l.jsx)("div",{className:"mb-8",children:(0,l.jsx)(s.Z,{})}),e?(0,l.jsxs)(l.Fragment,{children:[x&&(0,l.jsxs)("div",{className:"w-full max-w-xl bg-gray-900 rounded-lg p-4 mb-6",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Jackpot Progress"}),(0,l.jsxs)("div",{className:"mb-2",children:["Minors: ",(0,l.jsxs)("span",{className:"text-accent font-bold",children:[Math.round(100*x.progress.minors),"%"]})," | Majors: ",(0,l.jsxs)("span",{className:"text-accent font-bold",children:[Math.round(100*x.progress.majors),"%"]})]}),(0,l.jsx)("div",{className:"w-full bg-gray-700 rounded h-3 overflow-hidden",children:(0,l.jsx)("div",{className:"bg-primary h-3",style:{width:"".concat(100*x.progress.minors,"%")}})}),(0,l.jsx)("div",{className:"w-full bg-gray-700 rounded h-3 overflow-hidden mt-2",children:(0,l.jsx)("div",{className:"bg-accent h-3",style:{width:"".concat(100*x.progress.majors,"%")}})})]}),(0,l.jsxs)("div",{className:"bg-secondary rounded-lg p-8 flex flex-col items-center mb-8",children:[(0,l.jsx)("div",{className:"flex space-x-4 mb-6",children:n.map((e,t)=>(0,l.jsx)("div",{className:"w-20 h-20 flex items-center justify-center text-5xl bg-gray-800 rounded-lg border-4 border-primary shadow-lg",children:i[e].emoji},t))}),(0,l.jsxs)("div",{className:"flex space-x-4 mb-4",children:[(0,l.jsx)("button",{className:"bg-primary text-white px-6 py-2 rounded-lg font-bold disabled:opacity-50",onClick:()=>spin(1),disabled:d,children:"Spin 1x"}),(0,l.jsx)("button",{className:"bg-primary text-white px-6 py-2 rounded-lg font-bold disabled:opacity-50",onClick:()=>spin(10),disabled:d,children:"Spin 10x"}),(0,l.jsx)("button",{className:"bg-primary text-white px-6 py-2 rounded-lg font-bold disabled:opacity-50",onClick:()=>spin(100),disabled:d,children:"Spin 100x"})]}),(0,l.jsx)("p",{className:"text-gray-400 mb-2",children:"You must own at least 10,000 BONK tokens to spin."}),(0,l.jsxs)("div",{className:"w-full max-w-md mt-6",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Spin Log"}),(0,l.jsx)("ul",{className:"bg-gray-900 rounded-lg p-4 h-40 overflow-y-auto text-sm",children:m.map((e,t)=>(0,l.jsx)("li",{children:e},t))})]})]}),g&&(0,l.jsxs)("div",{className:"w-full max-w-xl bg-gray-900 rounded-lg p-4 mb-6",children:[(0,l.jsx)("h3",{className:"text-lg font-bold mb-2",children:"Recent Winners"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold text-accent mb-1",children:"Jackpot"}),(0,l.jsx)("ul",{className:"text-xs",children:g.jackpotWinners.map((e,t)=>{var n,a;return(0,l.jsxs)("li",{children:[null===(n=e.wallet)||void 0===n?void 0:n.slice(0,6),"...",null===(a=e.wallet)||void 0===a?void 0:a.slice(-4)," (",e.prizeAmount," SOL)"]},t)})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold text-primary mb-1",children:"Major"}),(0,l.jsx)("ul",{className:"text-xs",children:g.majorWinners.map((e,t)=>{var n,a;return(0,l.jsxs)("li",{children:[null===(n=e.wallet)||void 0===n?void 0:n.slice(0,6),"...",null===(a=e.wallet)||void 0===a?void 0:a.slice(-4)]},t)})})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("h4",{className:"font-semibold text-yellow-400 mb-1",children:"Minor"}),(0,l.jsx)("ul",{className:"text-xs",children:g.minorWinners.map((e,t)=>{var n,a;return(0,l.jsxs)("li",{children:[null===(n=e.wallet)||void 0===n?void 0:n.slice(0,6),"...",null===(a=e.wallet)||void 0===a?void 0:a.slice(-4)]},t)})})]})]})]})]}):(0,l.jsx)("div",{className:"text-center text-gray-400 mb-8",children:"Connect your wallet to start spinning!"})]})]})}},2070:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return Sidebar}});var l=n(7437),a=n(1396),s=n.n(a),r=n(4033);function Sidebar(){let e=(0,r.usePathname)();return(0,l.jsxs)("div",{className:"w-64 bg-secondary min-h-screen p-6",children:[(0,l.jsxs)("div",{className:"mb-8",children:[(0,l.jsx)("h1",{className:"text-2xl font-bold text-primary",children:"Bonk Spins"}),(0,l.jsx)("p",{className:"text-sm text-gray-400",children:"Spin your way to the next degen jackpot."})]}),(0,l.jsx)("nav",{className:"space-y-2",children:[{href:"/slot",label:"Slot Machine",icon:"\uD83C\uDFB0"},{href:"/",label:"Dashboard",icon:"\uD83D\uDCCA"},{href:"/leaderboard",label:"Leaderboard",icon:"\uD83C\uDFC6"},{href:"/dev-test",label:"Dev Test",icon:"\uD83E\uDDEA"},{href:"/about",label:"About",icon:"ℹ️"}].map(t=>{let n=e===t.href;return(0,l.jsxs)(s(),{href:t.href,className:"flex items-center space-x-3 px-4 py-3 rounded-lg transition-colors ".concat(n?"bg-primary text-white":"text-gray-300 hover:bg-gray-700 hover:text-white"),children:[(0,l.jsx)("span",{className:"text-lg",children:t.icon}),(0,l.jsx)("span",{className:"font-medium",children:t.label})]},t.href)})})]})}},3365:function(e,t,n){"use strict";n.d(t,{Z:function(){return components_WalletConnect}});var l=n(7437),a=n(2265),s=n(3446);function useWalletMultiButton({onSelectWallet:e}){let t;let{connect:n,connected:l,connecting:r,disconnect:o,disconnecting:i,publicKey:c,select:d,wallet:u,wallets:m}=(0,s.O)();t=r?"connecting":l?"connected":i?"disconnecting":u?"has-wallet":"no-wallet";let p=(0,a.useCallback)(()=>{n().catch(()=>{})},[n]),x=(0,a.useCallback)(()=>{o().catch(()=>{})},[o]),h=(0,a.useCallback)(()=>{e({onSelectWallet:d,wallets:m})},[e,d,m]);return{buttonState:t,onConnect:"has-wallet"===t?p:void 0,onDisconnect:"disconnecting"!==t&&"no-wallet"!==t?x:void 0,onSelectWallet:h,publicKey:c??void 0,walletIcon:u?.adapter.icon,walletName:u?.adapter.name}}var r=n(4976),o=n(2596);function BaseWalletConnectionButton({walletIcon:e,walletName:t,...n}){return a.createElement(r.z,{...n,className:"wallet-adapter-button-trigger",startIcon:e&&t?a.createElement(o.o,{wallet:{adapter:{icon:e,name:t}}}):void 0})}var i=n(2315);function BaseWalletMultiButton({children:e,labels:t,...n}){let{setVisible:l}=(0,i.h)(),{buttonState:s,onConnect:r,onDisconnect:o,publicKey:c,walletIcon:d,walletName:u}=useWalletMultiButton({onSelectWallet(){l(!0)}}),[m,p]=(0,a.useState)(!1),[x,h]=(0,a.useState)(!1),g=(0,a.useRef)(null);(0,a.useEffect)(()=>{let listener=e=>{let t=g.current;!t||t.contains(e.target)||h(!1)};return document.addEventListener("mousedown",listener),document.addEventListener("touchstart",listener),()=>{document.removeEventListener("mousedown",listener),document.removeEventListener("touchstart",listener)}},[]);let b=(0,a.useMemo)(()=>{if(e)return e;if(c){let e=c.toBase58();return e.slice(0,4)+".."+e.slice(-4)}return"connecting"===s||"has-wallet"===s?t[s]:t["no-wallet"]},[s,e,t,c]);return a.createElement("div",{className:"wallet-adapter-dropdown"},a.createElement(BaseWalletConnectionButton,{...n,"aria-expanded":x,style:{pointerEvents:x?"none":"auto",...n.style},onClick:()=>{switch(s){case"no-wallet":l(!0);break;case"has-wallet":r&&r();break;case"connected":h(!0)}},walletIcon:d,walletName:u},b),a.createElement("ul",{"aria-label":"dropdown-list",className:`wallet-adapter-dropdown-list ${x&&"wallet-adapter-dropdown-list-active"}`,ref:g,role:"menu"},c?a.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:async()=>{await navigator.clipboard.writeText(c.toBase58()),p(!0),setTimeout(()=>p(!1),400)},role:"menuitem"},m?t.copied:t["copy-address"]):null,a.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{l(!0),h(!1)},role:"menuitem"},t["change-wallet"]),o?a.createElement("li",{className:"wallet-adapter-dropdown-list-item",onClick:()=>{o(),h(!1)},role:"menuitem"},t.disconnect):null))}let c={"change-wallet":"Change wallet",connecting:"Connecting ...","copy-address":"Copy address",copied:"Copied",disconnect:"Disconnect","has-wallet":"Connect","no-wallet":"Select Wallet"};function WalletMultiButton(e){return a.createElement(BaseWalletMultiButton,{...e,labels:c})}var components_WalletConnect=()=>{let{connected:e,publicKey:t}=(0,s.O)();return(0,l.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,l.jsx)(WalletMultiButton,{className:"bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-2 px-4 rounded-lg transition-colors"}),e&&t&&(0,l.jsxs)("div",{className:"text-sm text-gray-300",children:["Connected: ",t.toString().slice(0,4),"...",t.toString().slice(-4)]})]})}},4033:function(e,t,n){e.exports=n(94)},4976:function(e,t,n){"use strict";n.d(t,{z:function(){return Button}});var l=n(2265);let Button=e=>l.createElement("button",{className:`wallet-adapter-button ${e.className||""}`,disabled:e.disabled,style:e.style,onClick:e.onClick,tabIndex:e.tabIndex||0,type:"button"},e.startIcon&&l.createElement("i",{className:"wallet-adapter-button-start-icon"},e.startIcon),e.children,e.endIcon&&l.createElement("i",{className:"wallet-adapter-button-end-icon"},e.endIcon))},2596:function(e,t,n){"use strict";n.d(t,{o:function(){return WalletIcon}});var l=n(2265);let WalletIcon=({wallet:e,...t})=>e&&l.createElement("img",{src:e.adapter.icon,alt:`${e.adapter.name} icon`,...t})},2315:function(e,t,n){"use strict";n.d(t,{g:function(){return s},h:function(){return useWalletModal}});var l=n(2265);let a={setVisible(e){console.error(constructMissingProviderErrorMessage("call","setVisible"))},visible:!1};function constructMissingProviderErrorMessage(e,t){return`You have tried to  ${e} "${t}" on a WalletModalContext without providing one. Make sure to render a WalletModalProvider as an ancestor of the component that uses WalletModalContext`}Object.defineProperty(a,"visible",{get:()=>(console.error(constructMissingProviderErrorMessage("read","visible")),!1)});let s=(0,l.createContext)(a);function useWalletModal(){return(0,l.useContext)(s)}},3446:function(e,t,n){"use strict";n.d(t,{O:function(){return useWallet},z:function(){return r}});var l=n(2265);let a=[],s={autoConnect:!1,connecting:!1,connected:!1,disconnecting:!1,select(){logMissingProviderError("call","select")},connect:()=>Promise.reject(logMissingProviderError("call","connect")),disconnect:()=>Promise.reject(logMissingProviderError("call","disconnect")),sendTransaction:()=>Promise.reject(logMissingProviderError("call","sendTransaction")),signTransaction:()=>Promise.reject(logMissingProviderError("call","signTransaction")),signAllTransactions:()=>Promise.reject(logMissingProviderError("call","signAllTransactions")),signMessage:()=>Promise.reject(logMissingProviderError("call","signMessage")),signIn:()=>Promise.reject(logMissingProviderError("call","signIn"))};function logMissingProviderError(e,t){let n=Error(`You have tried to ${e} "${t}" on a WalletContext without providing one. Make sure to render a WalletProvider as an ancestor of the component that uses WalletContext.`);return console.error(n),n}Object.defineProperty(s,"wallets",{get:()=>(logMissingProviderError("read","wallets"),a)}),Object.defineProperty(s,"wallet",{get:()=>(logMissingProviderError("read","wallet"),null)}),Object.defineProperty(s,"publicKey",{get:()=>(logMissingProviderError("read","publicKey"),null)});let r=(0,l.createContext)(s);function useWallet(){return(0,l.useContext)(r)}}},function(e){e.O(0,[176,971,472,744],function(){return e(e.s=2416)}),_N_E=e.O()}]);